<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="https://asdawej.github.io/favicon.ico" type="image/x-icon">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>asdawej's notes</title>
    <style type="text/css">
		a:link{text-decoration:none; color:#FF359B}
		a:active{text-decoration:underline; color:#FF359B}
		a:hover{text-decoration:underline; color:#FF359B}
		a:visited{text-decoration:none; color:#FF359B}
		body{
        	background:url("https://asdawej.github.io/background_img/e1637830534867.png") no-repeat center center fixed;
			-webkit-background-size:cover;
        	-o-background-size:cover;
        	background-size:cover;
            color:#FF9966;
		}
        pre{
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            font-weight: bold;
            color: black;
            font-size: 16px;
            background-color: rgba(192, 192, 192, 0.5);
            outline: solid;
            outline-color:blue;
            overflow-x: auto;
        }
	</style><!--链接样式、文字颜色与背景图片-->
</head>
<body>
<div id="container">
    <!--眉部-->
    <div id="header" style="width:1500px; float:left">
        <h1>MATLAB-数组及其运算、数据流式控制、数据读写</h1>
    </div>

    <!--中部-->
    <div id="M_container" style="width:1500px; float:left">
        <!--左区块-->
        <div id="L_menu" style="width:350px; float:left">
            <!--左上菜单-->
            <div id="LU_menu" style="background-color:rgba(192, 192, 192, 0.5); padding:20px">
                <!--个人主页-->
                <img src="https://asdawej.github.io/profile_img.jpg" alt="asdawej"></img>
                <p><b>bilibili:</b><a href="https://space.bilibili.com/350704566?spm_id_from=333.1007.0.0/" target="_blank">asdawej_bilibili</a></p>
                <p><b>Zhihu:</b><a href="https://www.zhihu.com/people/asdawej/" target="_blank">asdawej_Zhihu</a></p>
                <p><b>Github:</b><a href="https://github.com/asdawej/" target="_blank">asdawej_Github</a></p>
                <p><b>LeetCode:</b><a href="https://leetcode.cn/u/asdawej/" target="_blank">asdawej_LeetCode</a></p>
            </div>

            <!--左下菜单-->
            <div id="LD_menu" style="background-color:rgba(25, 153, 229, 0.5); padding:20px">
                <!--功能区-->
                <p><b><a href="https://asdawej.github.io/" style="color:#FF9966">首页</a></b></p>
                <p><a href="../mainpage.html">笔记</a></p>
                <p><b>友链</b></p>
                <p><a href="https://planet.tsinghua.edu.cn/member.php?mod=logging&action=login&referer=https%3A%2F%2Fplanet.tsinghua.edu.cn%2Findex.php" target="_blank">1911星球</a></p>
                <p><a href="https://icp.gov.moe/" target="_blank">萌国ICP备案</a></p>
                <p><a href="http://qwq.re/" target="_blank">律动喵喵的小站</a></p>
                <ul>
                    <li><p><a href="https://ruarua.ru/" target="_blank">Raccon</a></p></li>
                    <li><p><a href="https://quiz.qwq.re/" target="_blank">QwQuiz</a></p></li>
                </ul>
                <p><a href="http://scp-wiki-cn.wikidot.com/" target="_blank">SCP基金会中国分部</a></p>
                <p><a href="http://rpc-wiki-cn.wikidot.com/" target="_blank">RPC管理局中国分部</a></p>
                <p><a href="http://int-wiki.wikidot.com/" target="_blank">INT</a></p>
                <p><a href="https://wanderers-library.wikidot.com/" target="_blank">被放逐者之图书馆</a></p>
            </div>
        </div>

        <!--中间区块-->
        <div id="content_div" style="background-color:rgba(255, 255, 255, 0.5); width:800px; float:left; color:blue">
            <div id="content" style="padding:20px">

<h2 style="color:#FF9966">目录:</h2>
<ul style="color:#FF9966">
    <li><a href="#heading1">数组及其运算</a></li>
    <li><a href="#heading2">数据流式控制</a></li>
    <li><a href="#heading3">数据读写</a></li>
</ul>
<h2 id="heading1">数组及其运算</h2>
<p>数组是MATLAB运算的核心.
<br>数组的创建, 类似于Python, 可以采用类似range和list的方法, 同时也有一些常用的数组可以直接用函数创建:</p>
<pre>
    <code>1:2:11     % 步始:步长:步终, 包括步始和步终</code>
    <code>11:-2:1    % 步始、步终交换, 步长为负</code>
    <code>1:11       % 直接使用步始、步终</code>
    <br>
    <code>linspace(1, 5, 3)     % 以等差构造, 首项1, 末项5, 3项</code>
    <code>logspace(1, 5, 3)     % 以10^x构造, 首项10^1, 末项10^5, 3项</code>
    <br>
    <code>[1, 2, 3; 4, 5, 6]        % 2x3数组</code>
    <code>a = [1; 3]; b = [2; 4];</code>
    <code>[a, b]                    % 数组拼接</code>
    <br>
    <code>rng(1)                % 随机数种子</code>
    <code>rand(2, 3)            % 0-1均匀分布, 2x3</code>
    <code>randn(2)              % 标准正态分布, 2x2(只写一个为方阵)</code>
    <code>randi([1, 10], 2, 3)  % 在1:10随机取整数, 2x3</code>
    <br>
    <code>ones(3)           % 全1矩阵</code>
    <code>zeros(3)          % 全0矩阵</code>
    <code>eye(3)            % 主对角为1其余为0</code>
    <code>v = [1, 2, 3];</code>
    <code>diag(v)           % 对角阵</code>
</pre>
<p>MATLAB用小括号获取元素或者给该位置赋值, 小括号第几个数为第几个维度上的索引.
<br>可以用数组索引, 类似于切片, 其中末下标保留字为end.
<br>MATLAB支持数组给数组赋值, 切片得到的数组同理, 因此可以赋值[]来消去一部分的数组.
<br>如果用单一数字为下标, 进行迭代索引, 迭代顺序类似于:</p>
<pre>
    伪代码:
    <code>for k:</code>
    <code>    for j:</code>
    <code>        for i:</code>
    <code>            (i, j, k)</code>
</pre>
<p>特殊的切片:</p>
<pre>
    <code>a = reshape(1:24, 4, 6);</code>
    <code>a(:)</code>
    <code>b = reshape(a, 2, 3, 4);</code>
    <code>b(:, :)</code>
    <code>% 利用:作为缺省时, 如果维度缺少一个, 则按照最后一个维度逐索引切片并沿倒数第二个维度拼接以实现维度压缩</code>
    <br>
    <code>b(:, 1, :)</code>
    <code>% 给定有某一维度的索引, 则对所有该维度索引为给定索引的元素迭代, 新数组除该维度长度为索引长度外其余维度长度不变</code>
</pre>
<p>MATLAB可以制造示性数组和条件索引数组:</p>
<pre>
    <code>(a > 0)       % 按照a > 0条件生成a的示性数组</code>
    <code>find(a > 0)   % 满足条件的索引的数组</code>
    <code>find(a)       % 按照惯例, 默认为非零即真</code>
</pre>
<p>MATLAB支持数组给数组赋值, 切片得到的数组同理, 因此可以赋值[]来消去一部分的数组.
<br>repmat(mat, [m, n])将一个数组mat按照[m, n]自拼接在一起.
<br>reshape(mat, ...)按照给定的形状将数组mat的元素迭代生成新数组.
<br>flip(mat, axis)得到一个新数组, 所有原本排列在axis轴方向上的元素倒序排列.flipud(mat)等价于flip(mat, 1), fliplr(mat)等价于flip(mat, 2).
<br>rot90(mat, n)将数组mat旋转n个90度; 还有rot45、rotx、roty、rotz等函数, 不论.</p>
<p>sort用于排序:</p>
<pre>
    <code>a = reshape(1:12, 3, 4);</code>
    <code>[~, idx] = sort(a)                    % 平行于轴1升序(默认), 可以解包赋值分别得到排序后数组和排序索引数组, 这里用~忽略了排序后数组</code>
    <code>sort(a, 2, 'descend')                 % 平行于轴2排序, 'ascend'为升序, 'descend'为降序</code>
    <code>sort(a, 'ComparisonMethod', 'abs')    % 取函数值排序</code>
</pre>
<p>数组可以运算, 分为数组整体运算和逐元素运算:</p>
<pre>
    <code>a'    % 取共轭的转置</code>
    <code>a*b   % 矩阵乘法</code>
    <code>3*a   % 数乘3</code>
    <code>a/b   % 相当于a*b逆</code>
    <code>b\a   % 相当于b逆*a, 左除性能优于右除</code>
    <code>a/3   % 数乘1/3</code>
    <code>3\a   % 同上</code>
    <code>a^4   % a的4次方</code>
    <code>4^a   % 4的a次方</code>
    <br>
    <code>a.'   % 直接转置</code>
    <code>a.*b  % a与b元素分别相乘</code>
    <code>a./b  % a与b元素分别相除</code>
    <code>b.\a  % 同上</code>
    <code>4.^a  % 4的a各元素次方构成的数组</code>
    <code>a.^4  % a各元素的4次方构成的数组</code>
</pre>
<p>MATLAB的数据类型包括double, uint8、uint16、boolean、char、str.前3种的转换函数分别为double()、uint8()、uint16().
<br>char(x)是一个ASCII值为x的字符.str视为char行向量.
<br>用double(x)等函数可以将字符转为ASCII值.
<br>一套完整的转换流程:</p>
<pre>
    <code>a = 'Hello world!';</code>
    <code>rowcode_a = double(a);                        % 转为ASCII值行向量</code>
    <code>binstr_a = dec2bin(rowcode_a);                % 转为二进制码字符串的列向量</code>
    <code>bin01_a = double(binstr_a) - double('0');     % 二进制码的字符串拆成01数字</code>
    <code>colcode_a = bin01_a * (2.^(6:-1:0))';         % 一个常用转化, 重新得到ASCII值列向量</code>
    <code>char(colcode_a')</code>
</pre>
<p>常量保留字:</p>
<ul>
    <li>eps: 浮点数相对精度</li>
    <li>i、j: 复数单位</li>
    <li>inf、Inf: 无穷大</li>
    <li>intmax: 最大正整数; intmin: 最小负整数</li>
    <li>NaN、nan: 非数, 用isnan(x)检测</li>
    <li>pi: π</li>
    <li>realmax: 最大正实数; realmin: 最小正实数</li>
</ul>
<p>对于复数, 我们可以用real(x)和imag(x)取x的实、虚部, 用abs(x)和angle(x)取x的模长和辐角, 用conj(x)求x的共轭.</p>
<p>进制分为bin、oct、dec、hex, 用bin2dec(x)一类的函数转化.</p>
<p>用sum、cumsum和prod、cumprod求和与积:</p>
<pre>
    <code>sum(a)                % 将平行于轴1(默认)的子数组替换为它的和</code>
    <code>sum(a, 2)             % 将平行于轴2的子数组替换为它的和</code>
    <code>sum(a, 'all')         % 全部求和</code>
    <br>
    <code>cumsum(a)             % 将平行于轴1(默认)的子数组替换为累积和</code>
    <code>cumsum(a, 2)          % 将平行于轴2的子数组替换为累积和</code>
    <code>cumsum(a, 'reverse')  % 'reverse'为反向迭代</code>
    <br>
    <code>% prod、cumprod同上</code>
</pre>
<p>max和min用于求最大最小值:</p>
<pre>
    <code>[b, idx1] = max(a)                % b为a平行于轴1(默认)的子数组替换为它的最大值得到的数组, idx1为各最大值在子数组中的索引的数组</code>
    <code>max(a, [], 2)                     % 平行于轴2</code>
    <code>max(a, [], 'all')                 % 全数组最大值</code>
    <code>max(a, [], [2, 3])                % 平行于轴2-3平面的子数组替换为它的最大值得到的数组</code>
    <code>[~, idx2] = max(a, [], 'linear')  % idx2为各最大值在整个数组的迭代索引的数组</code>
    <code>max(x, y)                         % 两个形状一样的数组在每个位置上比较并取最大值</code>
    <br>
    <code>% min同上</code>
</pre>
<p>基础的运算符如~(取反)、&(位与)、|(位或)、&&(与)、||(或)按下不论.
<br>xor(a, b)为异或.
<br>all(a)为全真.
<br>any(a)为存在真.
<br>同时, 与isnan(x)相似, 我们有isempty(a)判断是否为空.这个主要是检查条件是否存在满足的, 如:</p>
<pre>
    <code>idx = find(condition); isempty(idx)</code>
    <code>% 也可以用any</code>
    <code>any(condition)</code>
</pre>
<h2 id="heading2">数据流式控制</h2>
<p>条件语句:</p>
<pre>
    <code>if expr1</code>
    <code>    cmd1</code>
    <code>elseif expr2</code>
    <code>    cmd2</code>
    <code>else</code>
    <code>    cmd3</code>
    <code>end</code>
</pre>
<p>循环语句:</p>
<pre>
    <code>while expr</code>
    <code>    cmd</code>
    <code>end</code>
    <br>
    <code>for i = arr</code>
    <code>    cmd</code>
    <code>end</code>
</pre>
<p>选择语句:</p>
<pre>
    <code>switch expr</code>
    <code>case val1</code>
    <code>    cmd1</code>
    <code>case val2</code>
    <code>    cmd2</code>
    <code>...</code>
    <code>otherwise</code>
    <code>    cmd_default</code>
    <code>end</code>
</pre>
<p>异常捕获:</p>
<pre>
    <code>try</code>
    <code>    cmd1</code>
    <code>catch ME  % 捕获为ME</code>
    <code>    cmd2</code>
    <code>end</code>
</pre>
<h2 id="heading3">数据读写</h2>
<p>读写文件使用save和load:</p>
<pre>
    <code>save file1.mat;                   % 把工作区写入file1.mat</code>
    <code>save file2.mat a b;               % 把变量a和b写入file2.mat</code>
    <code>save file2.mat c -append;         % 把变量c追加写入file2.mat</code>
    <code>save file3.dat d -ascii;          % 把数组d以8位ascii写入file3.dat</code>
    <code>save file4.dat e -ascii -double;  % 把数组e以16位ascii写入file4.dat</code>
    <br>
    <code>load file1.mat;                   % 读取file1.mat</code>
    <code>load file2.mat a c;               % 读取file2.mat的变量a和c</code>
    <code>load file3.dat -ascii;            % 读取8位ascii文件file3.dat, 创建数组file3并装入</code>
    <code>load file4.dat -ascii;            % 读取16位ascii文件file4.dat, 创建数组file4并装入</code>
</pre>
<p>类似于Python的print(), MATLAB有disp().可以用format long、format short一类的语句控制输出格式.</p>
<b style="color:#FF9966">零星补充:</b>
<pre style="outline-color:#FF9966">
    <code>qr(a)     % QR分解</code>
    <code>svd(a)    % SVD分解(奇异值分解)</code>
</pre>

            </div>
        </div>

    <!--脚部-->
    <div id="footer" style="width:1500px; background-color:rgba(192, 192, 192, 0.5); text-align:center; float:left">
        <p>Copyright © asdawej. All rights reserved.</p>
        <p><a href="https://icp.gov.moe/?keyword=20227744" target="_blank">萌ICP备20227744号</a></p>
    </div>
</div>
</body>
</html>
